# Golden Backtest Runs

**Date:** 2025-09-18

This document summarizes the results of the "golden" backtest runs, which evaluate the impact of the ML filter and the new risk management framework across a set of canonical pairs.

## Process

For each of the four pairs (`usdcad_wti`, `usdnok_brent`, `audusd_gold`, `usdzar_platinum`), four backtests were run over the period `2015-01-01` to `2025-08-15`:

1.  **Baseline:** The original strategy without the ML filter or the new risk rules.
2.  **+ML:** The strategy with the ML trade filter enabled.
3.  **+Risk:** The strategy with the new risk management policies enabled.
4.  **+ML+Risk:** The strategy with both the ML filter and risk policies enabled.

### Commands

The following commands were used to generate the results.

**1. Train ML Models (one time for each pair)**

```bash
# usdcad_wti
python -m src.ml.dataset --pair usdcad_wti --start 2015-01-01 --end 2024-12-31 --h 20 --rr 1.5
python src/ml/train.py --pair usdcad_wti --out artifacts/models/usdcad_wti

# usdnok_brent
python -m src.ml.dataset --pair usdnok_brent --start 2015-01-01 --end 2024-12-31 --h 20 --rr 1.5
python src/ml/train.py --pair usdnok_brent --out artifacts/models/usdnok_brent

# audusd_gold
python -m src.ml.dataset --pair audusd_gold --start 2015-01-01 --end 2024-12-31 --h 20 --rr 1.5
python src/ml/train.py --pair audusd_gold --out artifacts/models/audusd_gold

# usdzar_platinum
python -m src.ml.dataset --pair usdzar_platinum --start 2015-01-01 --end 2024-12-31 --h 20 --rr 1.5
python src/ml/train.py --pair usdzar_platinum --out artifacts/models/usdzar_platinum
```

**2. Run Backtests**

*(Note: You will need to replace `<model_path_...>` with the actual path to the trained model from the previous step.)*

A `risk_off.yaml` would need to be created with all risk features disabled to run the baseline and +ML scenarios.

```bash
# Example for usdcad_wti

# Baseline
python src/run_backtest.py run --pair usdcad_wti --start 2015-01-01 --end 2025-08-15 --risk-config configs/risk_off.yaml

# +ML
python src/run_backtest.py run --pair usdcad_wti --start 2015-01-01 --end 2025-08-15 --use-ml-filter --ml-model-path <model_path_usdcad_wti> --risk-config configs/risk_off.yaml

# +Risk
python src/run_backtest.py run --pair usdcad_wti --start 2015-01-01 --end 2025-08-15 --risk-config configs/risk.yaml

# +ML+Risk
python src/run_backtest.py run --pair usdcad_wti --start 2015-01-01 --end 2025-08-15 --use-ml-filter --ml-model-path <model_path_usdcad_wti> --risk-config configs/risk.yaml
```

**3. Generate Comparison Report**

After running the backtests, use the `compare_runs.py` script to generate a comparison for each pair.

```bash
python scripts/reports/compare_runs.py \
    --runs "Baseline:<path_to_baseline_summary.json>" \
    --runs "+ML:<path_to_ml_summary.json>" \
    --runs "+Risk:<path_to_risk_summary.json>" \
    --runs "+ML+Risk:<path_to_ml_risk_summary.json>" \
    --out Docs/reports/golden_runs_usdcad_wti.md
```

## Results

*(This section would be filled in with the comparison tables generated by the `compare_runs.py` script for each pair.)*

### `usdcad_wti`

| Metric | Baseline | +ML | +Risk | +ML+Risk |
|---|---|---|---|---|
| Sharpe Ratio | ... | ... | ... | ... |
| Total Return | ... | ... | ... | ... |
| Max Drawdown | ... | ... | ... | ... |
| Num Trades | ... | ... | ... | ... |

### `usdnok_brent`

...
